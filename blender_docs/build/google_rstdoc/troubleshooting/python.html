<document source="/home/htran/blender_documentations/blender_docs/manual/troubleshooting/python.rst">
 <section ids="python-errors" names="python\ errors">
  <title>
   Python Errors
  </title>
  <section ids="pythonpath" names="pythonpath">
   <title>
    PYTHONPATH
   </title>
   <paragraph>
    Blender will fail to load if the
    <literal>
     PYTHONPATH
    </literal>
    is set incorrectly.
   </paragraph>
   <paragraph>
    This can be useful for Python developers who want to use their own Python installation
however, it will prevent Blender from opening at all when set to an incompatible version of Python.
   </paragraph>
   <paragraph>
    To see if this is the cause of an error temporary unset the environment variable and reload Blender.
   </paragraph>
   <paragraph>
    See
    <reference name="Python's documentation" refuri="https://docs.python.org/3/using/cmdline.html#envvar-PYTHONPATH">
     Python’s documentation
    </reference>
    for details.
   </paragraph>
  </section>
  <section ids="precompiled-libraries" names="precompiled\ libraries">
   <title>
    Precompiled Libraries
   </title>
   <paragraph>
    While not common practice, Python add-ons can be distributed with their own precompiled libraries.
Unlike regular Python scripts, these are not portable between different platforms.
   </paragraph>
   <paragraph>
    It is possible the library is incompatible with your Blender installation
(attempting to load a library built for a different version of Python,
or loading a 32-bit library on a 64-bit system).
   </paragraph>
   <paragraph>
    If the add-on contains
    <literal>
     .pyd
    </literal>
    or
    <literal>
     .so
    </literal>
    files,
check that the distribution is compatible with your operating system.
   </paragraph>
  </section>
  <section ids="platform-specific" names="platform\ specific">
   <title>
    Platform Specific
   </title>
   <section ids="windows" names="windows">
    <title>
     Windows
    </title>
    <section ids="mixed-python-libraries-dll-s" names="mixed\ python\ libraries\ (dll's)">
     <title>
      Mixed Python Libraries (DLL’s)
     </title>
     <paragraph>
      If Python is raising errors or you have an add-on that just fails when enabled with an error, e.g:
      <literal>
       ... is not a valid Win32 application.
      </literal>
      .
     </paragraph>
     <figure ids="id1">
      <image candidates="{'*': 'images/troubleshooting_python_traceback.png'}" uri="images/troubleshooting_python_traceback.png"/>
      <caption>
       A Python traceback.
      </caption>
     </figure>
     <paragraph>
      This may be caused by some inconsistency in the Python libraries.
While Blender comes with its own bundled Python interpreter, duplicate, incompatible libraries can cause problems.
     </paragraph>
     <paragraph>
      To find out which Python Library caused the Problem check the error message.
     </paragraph>
     <paragraph>
      This is normally reported somewhere around the bottom line of the traceback.
With the error above you see the problem is caused while trying to import
      <literal>
       _socket
      </literal>
      .
This corresponds to either a file named
      <literal>
       _socket.py
      </literal>
      or
      <literal>
       _socket.pyd
      </literal>
      .
     </paragraph>
     <paragraph>
      To help troubleshoot this problem,
the following script can be pasted into the Text editor and run to check for duplicate libraries in your search path.
(The output will show in
      <reference internal="True" refuri="">
       <inline classes="doc">
        Command Line Window
       </inline>
      </reference>
      .)
     </paragraph>
     <literal_block force_highlighting="True" highlight_args="{}" language="python" linenos="False" xml:space="preserve">
      import os
import sys

# Change this based on the library you wish to test
test_lib = "_socket.pyd"

def GetSystemDirectory():
    from ctypes import windll, create_string_buffer, sizeof
    GetSystemDirectory = windll.kernel32.GetSystemDirectoryA
    buffer = create_string_buffer(260)
    GetSystemDirectory(buffer, sizeof(buffer))
    return os.fsdecode(buffer.value)

def library_search_paths():
    return (
        # Windows search paths
        os.path.dirname(sys.argv[0]),
        os.getcwd(),
        GetSystemDirectory(),
        os.environ["WINDIR"],  # GetWindowsDirectory
        *os.environ["PATH"].split(";"),

        # regular Python search paths
        *sys.path,
        )

def check_library_duplicate(libname):
    paths = [p for p in library_search_paths()
             if os.path.exists(os.path.join(p, libname))]

    print("Library %r found in %d locations:" % (libname, len(paths)))
    for p in paths:
        print("- %r" % p)

check_library_duplicate(test_lib)
     </literal_block>
    </section>
   </section>
  </section>
 </section>
</document>