<document source="/home/htran/blender_documentations/blender_docs/manual/about/contribute/translations/add_language.rst">
 <section ids="adding-a-language" names="adding\ a\ language">
  <title>
   Adding a Language
  </title>
  <section ids="preparations" names="preparations">
   <title>
    Preparations
   </title>
   <paragraph>
    If the language you want to translate has not been started by someone else already and
you wish to create a set of new files for the desired language, say ‘fr’ (French),
then you must first use the environment you have created,
as guided in
    <reference internal="True" refuri="#about-getting-started">
     <inline classes="std std-ref">
      Getting Started
     </inline>
    </reference>
    ,
in particular
    <reference internal="True" refuri="">
     <inline classes="doc">
      Install
     </inline>
    </reference>
    and
    <reference internal="True" refuri="">
     <inline classes="doc">
      Build
     </inline>
    </reference>
    sections.
   </paragraph>
   <paragraph>
    This will give you a foundation environment for:
   </paragraph>
   <bullet_list bullet="-">
    <list_item>
     <paragraph>
      Creating a new set of translation language from English source.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Perform
      <literal>
       make
      </literal>
      command to turn translated texts in po files into html files for testing locally.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Update changes in English texts which have been added by other contributors.
     </paragraph>
    </list_item>
   </bullet_list>
   <paragraph>
    Below examples show the process to create a new set of files for French, language code
    <literal>
     fr
    </literal>
    , on Linux platform.
Other platforms might vary slightly but should be mainly the same.
   </paragraph>
   <enumerated_list enumtype="arabic" prefix="" suffix=".">
    <list_item>
     <paragraph>
      Goto
      <literal>
       https://developer.blender.org
      </literal>
      to create an account for yourself and
become a developer/translator for the Blender organization.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Login the account and create a task with
      <literal>
       todo
      </literal>
      type, addressing an administrator in the
      <emphasis>
       Subscribers
      </emphasis>
      field,
requesting for a committer right in order to transfer changes to the central repository of the translation team.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Open an instance of the console application, such as Gnome-Terminal emulator.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Change the current working directory to the directory of
      <literal>
       blender_docs
      </literal>
      ,
where the instance of
      <literal>
       Makefile
      </literal>
      resides.
     </paragraph>
    </list_item>
   </enumerated_list>
  </section>
  <section ids="trying-the-make-process-to-create-html-files-in-english" names="trying\ the\ make\ process\ to\ create\ html\ files\ in\ english">
   <title>
    Trying the Make Process to Create HTML Files In English
   </title>
   <enumerated_list enumtype="arabic" prefix="" suffix=".">
    <list_item>
     <paragraph>
      Ensure the previous instance of
      <literal>
       build
      </literal>
      directory is removed, if any exists:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      make clean
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      Convert all the
      <literal>
       rst
      </literal>
      files into
      <literal>
       pot
      </literal>
      translation files:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      make gettext
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      Create
      <literal>
       html
      </literal>
      files:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      make html
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      After this, you can actually view the created html files locally following the prompted instruction, such as:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      xdg-open
      <path english="" manual="" to="" your="">
       /blender_docs/build/html/index.html
      </path>
     </literal_block>
    </list_item>
   </enumerated_list>
  </section>
  <section ids="creating-the-language-entry-in-the-html-menu" names="creating\ the\ language\ entry\ in\ the\ html\ menu">
   <title>
    Creating the Language Entry in the HTML Menu
   </title>
   <enumerated_list enumtype="arabic" prefix="" suffix=".">
    <list_item>
     <paragraph>
      Create an entry for the language in the html menu by opening file
      <literal>
       ./resources/theme/js/version_switch.js
      </literal>
      (assuming you are at the
      <literal>
       blender_docs
      </literal>
      subdirectory).
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Find the table for the languages in
      <literal>
       var all_langs = {..};
      </literal>
      .
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Enter the entry:
      <literal>
       "fr": "Français",
      </literal>
      , (
      <literal>
       "fr": "Français"
      </literal>
      ).
(Notice the Unicode characters.)
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      To find out about changes in the local repository:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      svn status
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      Enter your password:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      svn commit --username
      <your username="">
       -m "your comment"
      </your>
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      Bring your local repository up to the most recent version of changes, including the one you have just done:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      svn update .
     </literal_block>
    </list_item>
   </enumerated_list>
  </section>
  <section ids="setting-the-local-configuration-file" names="setting\ the\ local\ configuration\ file">
   <title>
    Setting the Local Configuration File
   </title>
   <enumerated_list enumtype="arabic" prefix="" suffix=".">
    <list_item>
     <paragraph>
      Open a text editor to enter the following texts,
change the language code to whatever the language you will be translating:
     </paragraph>
     <literal_block force_highlighting="True" highlight_args="{}" language="python" linenos="True" xml:space="preserve">
      language = 'fr'
locale_dirs = ['locale/']
gettext_compact = True
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      Save this file as
      <literal>
       conf.py
      </literal>
      in the
      <literal>
       blender_docs
      </literal>
      directory, where
      <literal>
       Makefile
      </literal>
      resides.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Tells
      <literal>
       svn
      </literal>
      to ignore this file when performing operations by executing this shell command:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      svn propset svn:ignore conf.py .
     </literal_block>
    </list_item>
   </enumerated_list>
  </section>
  <section ids="generating-the-set-of-files-for-the-target-language" names="generating\ the\ set\ of\ files\ for\ the\ target\ language">
   <title>
    Generating the Set of Files for the Target Language
   </title>
   <enumerated_list enumtype="arabic" prefix="" suffix=".">
    <list_item>
     <paragraph>
      Check out the current translation repository using the command:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      svn checkout https://svn.blender.org/svnroot/bf-manual-translations/trunk/blender_docs/locale
     </literal_block>
     <paragraph>
      This will download all language sets available in the repository into the
      <literal>
       locale
      </literal>
      directory of your drive.
You can go to the
      <literal>
       locale
      </literal>
      directory to see the hidden subdirectory
      <literal>
       .svn
      </literal>
      within it,
together with directories of languages.
You’ll need to add your own set of files for the language you’re trying to translating to.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      From the
      <literal>
       blender_docs
      </literal>
      directory to generate a set of files for
      <literal>
       fr
      </literal>
      language:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      make gettext
sphinx-intl update -p build/locale -l fr
     </literal_block>
     <paragraph>
      These files are still in English only, with all
      <literal>
       msgstr
      </literal>
      entries blank.
     </paragraph>
    </list_item>
    <list_item>
     <paragraph>
      Submit new set of files to the central repository:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      cd locale
svn add fr
svn commit --username
      <your username="">
       -m "Initial commit language set of files for French"
      </your>
     </literal_block>
    </list_item>
    <list_item>
     <paragraph>
      You don’t need all other languages being there, so remove the locale directory for the time being:
     </paragraph>
     <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
      rm -fr locale
     </literal_block>
     <paragraph>
      We will download this new set of language as guided in the next section.
     </paragraph>
    </list_item>
   </enumerated_list>
   <note>
    <bullet_list bullet="-">
     <list_item>
      <paragraph>
       It is recommended you make two environment variables for these directories, in the
       <literal>
        .bashrc
       </literal>
       to make it more convenient for changing or scripting batch/shell commands
for the process of translation and reviewing results:
      </paragraph>
      <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
       export BLENDER_MAN_EN=$HOME/
       <directory above="" directory="" file="" make="" to="">
        /blender_docs
export BLENDER_MAN_FR=$BLENDER_MAN_EN/locale
       </directory>
      </literal_block>
     </list_item>
     <list_item>
      <paragraph>
       Newly generated files will contain some placeholders for authors and revision dates etc.
If you find the job of replacing them repetitive, make use of the script
       <literal>
        change_placeholders.sh
       </literal>
       in the subdirectory
       <literal>
        ~/blender_docs/toos_maintenance
       </literal>
       , make a copy of that to your local
       <literal>
        bin
       </literal>
       directory and
replace all values that were mentioned in the file with your specific details,
then after each change to a file, you would do following commands
to update the file with your personal details, revision date and time,
plus generating the html files for your language, which you can view using your Internet browser:
      </paragraph>
      <literal_block force_highlighting="False" language="sh" linenos="False" xml:space="preserve">
       $HOME/bin/change_placeholders.sh $BLENDER_MAN_FR
make -d --trace -w -B -e SPHINXOPTS="-D language='fr'" 2&gt;&amp;1
      </literal_block>
     </list_item>
    </bullet_list>
   </note>
  </section>
 </section>
</document>