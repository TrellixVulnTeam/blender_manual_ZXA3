<document source="/home/htran/blender_documentations/blender_docs/manual/compositing/types/color/z_combine.rst">
 <target refid="bpy-types-compositornodezcombine">
 </target>
 <section ids="z-combine-node bpy-types-compositornodezcombine" names="z\ combine\ node bpy.types.compositornodezcombine">
  <title>
   Z Combine Node
  </title>
  <figure align="right" ids="id1">
   <image candidates="{'*': 'images/compositing_node-types_CompositorNodeZcombine.png'}" uri="images/compositing_node-types_CompositorNodeZcombine.png"/>
   <caption>
    Z Combine Node.
   </caption>
  </figure>
  <paragraph>
   The Z Combine node combines two images based on their Z-depth maps.
It overlays the images using the provided Z values to
detect which parts of one image are in front of the other.
  </paragraph>
  <section ids="inputs" names="inputs">
   <title>
    Inputs
   </title>
   <definition_list>
    <definition_list_item>
     <term>
      Image
     </term>
     <definition>
      <paragraph>
       The background image.
      </paragraph>
     </definition>
    </definition_list_item>
    <definition_list_item>
     <term>
      Z
     </term>
     <definition>
      <paragraph>
       Z depth of the background image.
      </paragraph>
     </definition>
    </definition_list_item>
    <definition_list_item>
     <term>
      Image
     </term>
     <definition>
      <paragraph>
       The foreground image.
      </paragraph>
     </definition>
    </definition_list_item>
    <definition_list_item>
     <term>
      Z
     </term>
     <definition>
      <paragraph>
       Z depth of the foreground image.
      </paragraph>
     </definition>
    </definition_list_item>
   </definition_list>
  </section>
  <section ids="properties" names="properties">
   <title>
    Properties
   </title>
   <definition_list>
    <definition_list_item>
     <term>
      Use Alpha
     </term>
     <definition>
      <paragraph>
       The chosen Image pixel alpha channel is also carried over.
If a pixel is partially or totally transparent,
the result of the Z Combine will also be partially transparent;
in which case the background image will show through the foreground (chosen) pixel.
      </paragraph>
     </definition>
    </definition_list_item>
    <definition_list_item>
     <term>
      Anti-Alias Z
     </term>
     <definition>
      <paragraph>
       Applies
       <reference internal="True" refuri="#term-anti-aliasing">
        <inline classes="xref std std-term">
         Anti-Aliasing
        </inline>
       </reference>
       to avoid artifacts at sharp edges or areas with a high contrast.
      </paragraph>
     </definition>
    </definition_list_item>
   </definition_list>
  </section>
  <section ids="outputs" names="outputs">
   <title>
    Outputs
   </title>
   <definition_list>
    <definition_list_item>
     <term>
      Image
     </term>
     <definition>
      <paragraph>
       If both Z values are equal, it will use the foreground image.
Whichever Z value is less decides which image pixel is used.
See
       <reference internal="True" refuri="#term-z-buffer">
        <inline classes="xref std std-term">
         Z-buffer
        </inline>
       </reference>
       .
      </paragraph>
     </definition>
    </definition_list_item>
    <definition_list_item>
     <term>
      Z
     </term>
     <definition>
      <paragraph>
       The combined Z depth, which allows to thread multiple Z-combines together.
      </paragraph>
     </definition>
    </definition_list_item>
   </definition_list>
  </section>
  <section ids="examples" names="examples">
   <title>
    Examples
   </title>
   <figure ids="id2">
    <image candidates="{'*': 'images/compositing_types_color_z-combine_example-1.png'}" uri="images/compositing_types_color_z-combine_example-1.png" width="700px"/>
    <caption>
     Choosing closest pixels.
    </caption>
   </figure>
   <paragraph>
    In the example above, render output from two scenes are mixed using the Z-Offset node,
one from a sphere of size 1.30, and the other a cube of size 1.00.
The sphere and square are located at the same place. The cube is tipped forward,
so the corner in the center is closer to the camera than the sphere surface;
so Z-Offset chooses to use the cube’s pixels. But the sphere is slightly larger
(a size of 1.30 versus 1.00), so it does not fit totally inside the cube. At some point,
as the cube’s sides recede back away from the camera, the sphere’s sides are closer.
When this happens, Z-offset uses the sphere’s pixels to form the resulting picture.
   </paragraph>
   <paragraph>
    This node can be used to combine a foreground with a background matte painting.
Walt Disney pioneered the use of multi-plane mattes, where three or four partial mattes were
painted on glass and placed on the left and right at different Z positions; minimal camera
moves to the right created the illusion of depth as Bambi moved through the forest.
   </paragraph>
   <note>
    <paragraph>
     Valid Input
    </paragraph>
    <paragraph>
     Z Input Sockets do not accept fixed values; they must get a vector set (see Map Value node).
Image Input Sockets will not accept a color since it does not have UV coordinates.
    </paragraph>
   </note>
   <figure ids="id3">
    <image candidates="{'*': 'images/compositing_types_color_z-combine_example-2.png'}" uri="images/compositing_types_color_z-combine_example-2.png" width="700px"/>
    <caption>
     Mix and match images.
    </caption>
   </figure>
   <paragraph>
    The Z Combine can be used to merge two images as well,
using the Z values put out by two render layers.
Using the Z values from the sphere and cube scenes above, but threading different images,
yields the example to the right.
   </paragraph>
   <figure ids="id4">
    <image candidates="{'*': 'images/compositing_types_color_z-combine_example-3.png'}" uri="images/compositing_types_color_z-combine_example-3.png" width="700px"/>
    <caption>
     Z Combine in action.
    </caption>
   </figure>
   <paragraph>
    In this node setup a render scene is mixed with a flat image. In the side view of the scene,
the purple cube is 10 units away from the camera, and the gray ball is 20.
The 3D cursor is about 15 units away from the camera. The image is Z-in at a location of 15,
thus inserting it in between the cube and the ball.
The resulting image appears to have the cube on the table.
   </paragraph>
   <note>
    <paragraph>
     Invisible Man Effect
    </paragraph>
    <paragraph>
     If a foreground image with a higher Alpha than the background,
is then mixed in the Z combine with a slightly magnified background,
the outline of the transparent area will distort the background,
enough to make it look like seeing a part of the background through
an invisible yet Fresnel-lens object.
    </paragraph>
   </note>
  </section>
 </section>
</document>